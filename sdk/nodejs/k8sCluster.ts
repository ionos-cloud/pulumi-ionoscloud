// *** WARNING: this file was generated by the Pulumi Terraform Bridge (tfgen) Tool. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

import * as pulumi from "@pulumi/pulumi";
import * as inputs from "./types/input";
import * as outputs from "./types/output";
import * as utilities from "./utilities";

/**
 * Manages a **Managed Kubernetes Cluster** on IonosCloud.
 *
 * ## Example Usage
 *
 * ### Public cluster
 *
 * <!--Start PulumiCodeChooser -->
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as ionoscloud from "@pulumi/ionoscloud";
 *
 * const example = new ionoscloud.K8sCluster("example", {
 *     apiSubnetAllowLists: ["1.2.3.4/32"],
 *     k8sVersion: "1.28.6",
 *     maintenanceWindow: {
 *         dayOfTheWeek: "Sunday",
 *         time: "09:00:00Z",
 *     },
 *     s3Buckets: [{
 *         name: "globally_unique_bucket_name",
 *     }],
 * });
 * ```
 * <!--End PulumiCodeChooser -->
 *
 * ### Private Cluster
 *
 * <!--Start PulumiCodeChooser -->
 * ```typescript
 * import * as pulumi from "@pulumi/pulumi";
 * import * as ionoscloud from "@pulumi/ionoscloud";
 *
 * const testdatacenter = new ionoscloud.compute.Datacenter("testdatacenter", {
 *     location: "de/fra",
 *     description: "Test datacenter",
 * });
 * const k8sip = new ionoscloud.compute.IPBlock("k8sip", {
 *     location: "de/fra",
 *     size: 1,
 * });
 * const example = new ionoscloud.K8sCluster("example", {
 *     k8sVersion: "1.28.6",
 *     maintenanceWindow: {
 *         dayOfTheWeek: "Sunday",
 *         time: "09:00:00Z",
 *     },
 *     apiSubnetAllowLists: ["1.2.3.4/32"],
 *     s3Buckets: [{
 *         name: "globally_unique_bucket_name",
 *     }],
 *     location: "de/fra",
 *     natGatewayIp: k8sip.ips[0],
 *     nodeSubnet: "192.168.0.0/16",
 *     "public": false,
 * });
 * ```
 * <!--End PulumiCodeChooser -->
 *
 * ## Import
 *
 * A Kubernetes Cluster resource can be imported using its `resource id`, e.g.
 *
 * ```sh
 * $ pulumi import ionoscloud:index/k8sCluster:K8sCluster demo {k8s_cluster uuid}
 * ```
 *
 * This can be helpful when you want to import kubernetes clusters which you have already created manually or using other means, outside of terraform.
 *
 * ⚠️ **_Warning: **During a maintenance window, k8s can update your `k8s_version` if the old one reaches end of life. This upgrade will not be shown in the plan, as we prevent
 *
 * terraform from doing a downgrade, as downgrading `k8s_version` is not supported._**
 */
export class K8sCluster extends pulumi.CustomResource {
    /**
     * Get an existing K8sCluster resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state Any extra arguments used during the lookup.
     * @param opts Optional settings to control the behavior of the CustomResource.
     */
    public static get(name: string, id: pulumi.Input<pulumi.ID>, state?: K8sClusterState, opts?: pulumi.CustomResourceOptions): K8sCluster {
        return new K8sCluster(name, <any>state, { ...opts, id: id });
    }

    /** @internal */
    public static readonly __pulumiType = 'ionoscloud:index/k8sCluster:K8sCluster';

    /**
     * Returns true if the given object is an instance of K8sCluster.  This is designed to work even
     * when multiple copies of the Pulumi SDK have been loaded into the same process.
     */
    public static isInstance(obj: any): obj is K8sCluster {
        if (obj === undefined || obj === null) {
            return false;
        }
        return obj['__pulumiType'] === K8sCluster.__pulumiType;
    }

    /**
     * [bool] When set to true, allows the update of immutable fields by first destroying and then re-creating the cluster.
     *
     * ⚠️ **_Warning: `allowReplace` - lets you update immutable fields, but it first destroys and then re-creates the cluster in order to do it. Set the field to true only if you know what you are doing._**
     */
    public readonly allowReplace!: pulumi.Output<boolean | undefined>;
    /**
     * [list] Access to the K8s API server is restricted to these CIDRs. Cluster-internal traffic is not affected by this restriction. If no allowlist is specified, access is not restricted. If an IP without subnet mask is provided, the default value will be used: 32 for IPv4 and 128 for IPv6.
     */
    public readonly apiSubnetAllowLists!: pulumi.Output<string[] | undefined>;
    /**
     * [string] The desired Kubernetes Version. For supported values, please check the API documentation. Downgrades are not supported. The provider will ignore downgrades of patch level.
     */
    public readonly k8sVersion!: pulumi.Output<string>;
    /**
     * [string] This attribute is mandatory if the cluster is private. The location must be enabled for your contract, or you must have a data center at that location. This property is not adjustable.
     */
    public readonly location!: pulumi.Output<string | undefined>;
    /**
     * A maintenance window comprise of a day of the week and a time for maintenance to be allowed
     */
    public readonly maintenanceWindow!: pulumi.Output<outputs.K8sClusterMaintenanceWindow>;
    /**
     * [string] The name of the Kubernetes Cluster.
     */
    public readonly name!: pulumi.Output<string>;
    /**
     * [string] The NAT gateway IP of the cluster if the cluster is private. This attribute is immutable. Must be a reserved IP in the same location as the cluster's location. This attribute is mandatory if the cluster is private.
     */
    public readonly natGatewayIp!: pulumi.Output<string | undefined>;
    /**
     * [string] The node subnet of the cluster, if the cluster is private. This attribute is optional and immutable. Must be a valid CIDR notation for an IPv4 network prefix of 16 bits length.
     */
    public readonly nodeSubnet!: pulumi.Output<string>;
    /**
     * [boolean] Indicates if the cluster is public or private. This attribute is immutable.
     */
    public readonly public!: pulumi.Output<boolean | undefined>;
    /**
     * [list] List of IONOS Object Storage buckets configured for K8s usage. For now it contains only an IONOS Object Storage bucket used to store K8s API audit logs.
     */
    public readonly s3Buckets!: pulumi.Output<outputs.K8sClusterS3Bucket[] | undefined>;
    /**
     * [list] List of versions that may be used for node pools under this cluster
     */
    public /*out*/ readonly viableNodePoolVersions!: pulumi.Output<string[]>;

    /**
     * Create a K8sCluster resource with the given unique name, arguments, and options.
     *
     * @param name The _unique_ name of the resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param opts A bag of options that control this resource's behavior.
     */
    constructor(name: string, args?: K8sClusterArgs, opts?: pulumi.CustomResourceOptions)
    constructor(name: string, argsOrState?: K8sClusterArgs | K8sClusterState, opts?: pulumi.CustomResourceOptions) {
        let resourceInputs: pulumi.Inputs = {};
        opts = opts || {};
        if (opts.id) {
            const state = argsOrState as K8sClusterState | undefined;
            resourceInputs["allowReplace"] = state ? state.allowReplace : undefined;
            resourceInputs["apiSubnetAllowLists"] = state ? state.apiSubnetAllowLists : undefined;
            resourceInputs["k8sVersion"] = state ? state.k8sVersion : undefined;
            resourceInputs["location"] = state ? state.location : undefined;
            resourceInputs["maintenanceWindow"] = state ? state.maintenanceWindow : undefined;
            resourceInputs["name"] = state ? state.name : undefined;
            resourceInputs["natGatewayIp"] = state ? state.natGatewayIp : undefined;
            resourceInputs["nodeSubnet"] = state ? state.nodeSubnet : undefined;
            resourceInputs["public"] = state ? state.public : undefined;
            resourceInputs["s3Buckets"] = state ? state.s3Buckets : undefined;
            resourceInputs["viableNodePoolVersions"] = state ? state.viableNodePoolVersions : undefined;
        } else {
            const args = argsOrState as K8sClusterArgs | undefined;
            resourceInputs["allowReplace"] = args ? args.allowReplace : undefined;
            resourceInputs["apiSubnetAllowLists"] = args ? args.apiSubnetAllowLists : undefined;
            resourceInputs["k8sVersion"] = args ? args.k8sVersion : undefined;
            resourceInputs["location"] = args ? args.location : undefined;
            resourceInputs["maintenanceWindow"] = args ? args.maintenanceWindow : undefined;
            resourceInputs["name"] = args ? args.name : undefined;
            resourceInputs["natGatewayIp"] = args ? args.natGatewayIp : undefined;
            resourceInputs["nodeSubnet"] = args ? args.nodeSubnet : undefined;
            resourceInputs["public"] = args ? args.public : undefined;
            resourceInputs["s3Buckets"] = args ? args.s3Buckets : undefined;
            resourceInputs["viableNodePoolVersions"] = undefined /*out*/;
        }
        opts = pulumi.mergeOptions(utilities.resourceOptsDefaults(), opts);
        super(K8sCluster.__pulumiType, name, resourceInputs, opts);
    }
}

/**
 * Input properties used for looking up and filtering K8sCluster resources.
 */
export interface K8sClusterState {
    /**
     * [bool] When set to true, allows the update of immutable fields by first destroying and then re-creating the cluster.
     *
     * ⚠️ **_Warning: `allowReplace` - lets you update immutable fields, but it first destroys and then re-creates the cluster in order to do it. Set the field to true only if you know what you are doing._**
     */
    allowReplace?: pulumi.Input<boolean>;
    /**
     * [list] Access to the K8s API server is restricted to these CIDRs. Cluster-internal traffic is not affected by this restriction. If no allowlist is specified, access is not restricted. If an IP without subnet mask is provided, the default value will be used: 32 for IPv4 and 128 for IPv6.
     */
    apiSubnetAllowLists?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * [string] The desired Kubernetes Version. For supported values, please check the API documentation. Downgrades are not supported. The provider will ignore downgrades of patch level.
     */
    k8sVersion?: pulumi.Input<string>;
    /**
     * [string] This attribute is mandatory if the cluster is private. The location must be enabled for your contract, or you must have a data center at that location. This property is not adjustable.
     */
    location?: pulumi.Input<string>;
    /**
     * A maintenance window comprise of a day of the week and a time for maintenance to be allowed
     */
    maintenanceWindow?: pulumi.Input<inputs.K8sClusterMaintenanceWindow>;
    /**
     * [string] The name of the Kubernetes Cluster.
     */
    name?: pulumi.Input<string>;
    /**
     * [string] The NAT gateway IP of the cluster if the cluster is private. This attribute is immutable. Must be a reserved IP in the same location as the cluster's location. This attribute is mandatory if the cluster is private.
     */
    natGatewayIp?: pulumi.Input<string>;
    /**
     * [string] The node subnet of the cluster, if the cluster is private. This attribute is optional and immutable. Must be a valid CIDR notation for an IPv4 network prefix of 16 bits length.
     */
    nodeSubnet?: pulumi.Input<string>;
    /**
     * [boolean] Indicates if the cluster is public or private. This attribute is immutable.
     */
    public?: pulumi.Input<boolean>;
    /**
     * [list] List of IONOS Object Storage buckets configured for K8s usage. For now it contains only an IONOS Object Storage bucket used to store K8s API audit logs.
     */
    s3Buckets?: pulumi.Input<pulumi.Input<inputs.K8sClusterS3Bucket>[]>;
    /**
     * [list] List of versions that may be used for node pools under this cluster
     */
    viableNodePoolVersions?: pulumi.Input<pulumi.Input<string>[]>;
}

/**
 * The set of arguments for constructing a K8sCluster resource.
 */
export interface K8sClusterArgs {
    /**
     * [bool] When set to true, allows the update of immutable fields by first destroying and then re-creating the cluster.
     *
     * ⚠️ **_Warning: `allowReplace` - lets you update immutable fields, but it first destroys and then re-creates the cluster in order to do it. Set the field to true only if you know what you are doing._**
     */
    allowReplace?: pulumi.Input<boolean>;
    /**
     * [list] Access to the K8s API server is restricted to these CIDRs. Cluster-internal traffic is not affected by this restriction. If no allowlist is specified, access is not restricted. If an IP without subnet mask is provided, the default value will be used: 32 for IPv4 and 128 for IPv6.
     */
    apiSubnetAllowLists?: pulumi.Input<pulumi.Input<string>[]>;
    /**
     * [string] The desired Kubernetes Version. For supported values, please check the API documentation. Downgrades are not supported. The provider will ignore downgrades of patch level.
     */
    k8sVersion?: pulumi.Input<string>;
    /**
     * [string] This attribute is mandatory if the cluster is private. The location must be enabled for your contract, or you must have a data center at that location. This property is not adjustable.
     */
    location?: pulumi.Input<string>;
    /**
     * A maintenance window comprise of a day of the week and a time for maintenance to be allowed
     */
    maintenanceWindow?: pulumi.Input<inputs.K8sClusterMaintenanceWindow>;
    /**
     * [string] The name of the Kubernetes Cluster.
     */
    name?: pulumi.Input<string>;
    /**
     * [string] The NAT gateway IP of the cluster if the cluster is private. This attribute is immutable. Must be a reserved IP in the same location as the cluster's location. This attribute is mandatory if the cluster is private.
     */
    natGatewayIp?: pulumi.Input<string>;
    /**
     * [string] The node subnet of the cluster, if the cluster is private. This attribute is optional and immutable. Must be a valid CIDR notation for an IPv4 network prefix of 16 bits length.
     */
    nodeSubnet?: pulumi.Input<string>;
    /**
     * [boolean] Indicates if the cluster is public or private. This attribute is immutable.
     */
    public?: pulumi.Input<boolean>;
    /**
     * [list] List of IONOS Object Storage buckets configured for K8s usage. For now it contains only an IONOS Object Storage bucket used to store K8s API audit logs.
     */
    s3Buckets?: pulumi.Input<pulumi.Input<inputs.K8sClusterS3Bucket>[]>;
}
