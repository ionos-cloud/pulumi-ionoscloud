// *** WARNING: this file was generated by pulumi. ***
// *** Do not edit by hand unless you're certain you know what you are doing! ***

package com.pulumi.ionoscloud;

import com.pulumi.core.Output;
import com.pulumi.core.annotations.Export;
import com.pulumi.core.annotations.ResourceType;
import com.pulumi.core.internal.Codegen;
import com.pulumi.ionoscloud.K8sNodePoolArgs;
import com.pulumi.ionoscloud.Utilities;
import com.pulumi.ionoscloud.inputs.K8sNodePoolState;
import com.pulumi.ionoscloud.outputs.K8sNodePoolAutoScaling;
import com.pulumi.ionoscloud.outputs.K8sNodePoolLan;
import com.pulumi.ionoscloud.outputs.K8sNodePoolMaintenanceWindow;
import java.lang.Boolean;
import java.lang.Integer;
import java.lang.String;
import java.util.List;
import java.util.Map;
import java.util.Optional;
import javax.annotation.Nullable;

/**
 * Manages a **Managed Kubernetes Node Pool**, part of a managed Kubernetes cluster on IonosCloud.
 * 
 * ## Example Usage
 * 
 * &lt;!--Start PulumiCodeChooser --&gt;
 * <pre>
 * {@code
 * package generated_program;
 * 
 * import com.pulumi.Context;
 * import com.pulumi.Pulumi;
 * import com.pulumi.core.Output;
 * import com.pulumi.ionoscloud.compute.Datacenter;
 * import com.pulumi.ionoscloud.compute.DatacenterArgs;
 * import com.pulumi.ionoscloud.Lan;
 * import com.pulumi.ionoscloud.LanArgs;
 * import com.pulumi.ionoscloud.Ipblock;
 * import com.pulumi.ionoscloud.IpblockArgs;
 * import com.pulumi.ionoscloud.K8sCluster;
 * import com.pulumi.ionoscloud.K8sClusterArgs;
 * import com.pulumi.ionoscloud.inputs.K8sClusterMaintenanceWindowArgs;
 * import com.pulumi.ionoscloud.inputs.K8sClusterS3BucketArgs;
 * import com.pulumi.ionoscloud.K8sNodePool;
 * import com.pulumi.ionoscloud.K8sNodePoolArgs;
 * import com.pulumi.ionoscloud.inputs.K8sNodePoolMaintenanceWindowArgs;
 * import com.pulumi.ionoscloud.inputs.K8sNodePoolAutoScalingArgs;
 * import com.pulumi.ionoscloud.inputs.K8sNodePoolLanArgs;
 * import java.util.List;
 * import java.util.ArrayList;
 * import java.util.Map;
 * import java.io.File;
 * import java.nio.file.Files;
 * import java.nio.file.Paths;
 * 
 * public class App {
 *     public static void main(String[] args) {
 *         Pulumi.run(App::stack);
 *     }
 * 
 *     public static void stack(Context ctx) {
 *         var exampleDatacenter = new Datacenter("exampleDatacenter", DatacenterArgs.builder()        
 *             .location("us/las")
 *             .description("datacenter description")
 *             .secAuthProtection(false)
 *             .build());
 * 
 *         var exampleLan = new Lan("exampleLan", LanArgs.builder()        
 *             .datacenterId(exampleDatacenter.id())
 *             .public_(false)
 *             .build());
 * 
 *         var exampleIpblock = new Ipblock("exampleIpblock", IpblockArgs.builder()        
 *             .location("us/las")
 *             .size(3)
 *             .build());
 * 
 *         var exampleK8sCluster = new K8sCluster("exampleK8sCluster", K8sClusterArgs.builder()        
 *             .k8sVersion("1.28.6")
 *             .maintenanceWindow(K8sClusterMaintenanceWindowArgs.builder()
 *                 .dayOfTheWeek("Sunday")
 *                 .time("09:00:00Z")
 *                 .build())
 *             .apiSubnetAllowLists("1.2.3.4/32")
 *             .s3Buckets(K8sClusterS3BucketArgs.builder()
 *                 .name("globally_unique_s3_bucket_name")
 *                 .build())
 *             .build());
 * 
 *         var exampleK8sNodePool = new K8sNodePool("exampleK8sNodePool", K8sNodePoolArgs.builder()        
 *             .datacenterId(exampleDatacenter.id())
 *             .k8sClusterId(exampleK8sCluster.id())
 *             .k8sVersion(exampleK8sCluster.k8sVersion())
 *             .maintenanceWindow(K8sNodePoolMaintenanceWindowArgs.builder()
 *                 .dayOfTheWeek("Monday")
 *                 .time("09:00:00Z")
 *                 .build())
 *             .autoScaling(K8sNodePoolAutoScalingArgs.builder()
 *                 .minNodeCount(1)
 *                 .maxNodeCount(2)
 *                 .build())
 *             .cpuFamily("INTEL_XEON")
 *             .availabilityZone("AUTO")
 *             .storageType("SSD")
 *             .nodeCount(1)
 *             .coresCount(2)
 *             .ramSize(2048)
 *             .storageSize(40)
 *             .publicIps(            
 *                 exampleIpblock.ips().applyValue(ips -> ips[0]),
 *                 exampleIpblock.ips().applyValue(ips -> ips[1]),
 *                 exampleIpblock.ips().applyValue(ips -> ips[2]))
 *             .lans(K8sNodePoolLanArgs.builder()
 *                 .id(exampleLan.id())
 *                 .dhcp(true)
 *                 .routes(K8sNodePoolLanRouteArgs.builder()
 *                     .network("1.2.3.5/24")
 *                     .gatewayIp("10.1.5.17")
 *                     .build())
 *                 .build())
 *             .labels(Map.ofEntries(
 *                 Map.entry("lab1", "value1"),
 *                 Map.entry("lab2", "value2")
 *             ))
 *             .annotations(Map.ofEntries(
 *                 Map.entry("ann1", "value1"),
 *                 Map.entry("ann2", "value2")
 *             ))
 *             .build());
 * 
 *     }
 * }
 * }
 * </pre>
 * &lt;!--End PulumiCodeChooser --&gt;
 * **Note:** Set `create_before_destroy` on the lan resource if you want to remove it from the nodepool during an update. This is to ensure that the nodepool is updated before the lan is destroyed.
 * 
 * ## Import
 * 
 * A Kubernetes Node Pool resource can be imported using its Kubernetes cluster&#39;s uuid as well as its own UUID, both of which you can retrieve from the cloud API: `resource id`, e.g.:
 * 
 * ```sh
 * $ pulumi import ionoscloud:index/k8sNodePool:K8sNodePool demo {k8s_cluster_uuid}/{k8s_nodepool_id}
 * ```
 * 
 * This can be helpful when you want to import kubernetes node pools which you have already created manually or using other means, outside of terraform, towards the goal of managing them via Terraform
 * 
 * ⚠️ **_Warning: **During a maintenance window, k8s can update your `k8s_version` if the old one reaches end of life. This upgrade will not be shown in the plan, as we prevent
 * 
 * terraform from doing a downgrade, as downgrading `k8s_version` is not supported._**
 * 
 * ⚠️ **_Warning: **If you are upgrading from v5.x.x to v6.x.x**: You have to modify you plan for lans to match the new structure, by putting the ids from the old slice in lans.id fields. This is not backwards compatible._**
 * 
 */
@ResourceType(type="ionoscloud:index/k8sNodePool:K8sNodePool")
public class K8sNodePool extends com.pulumi.resources.CustomResource {
    /**
     * When set to true, allows the update of immutable fields by destroying and re-creating the node pool
     * 
     */
    @Export(name="allowReplace", refs={Boolean.class}, tree="[0]")
    private Output</* @Nullable */ Boolean> allowReplace;

    /**
     * @return When set to true, allows the update of immutable fields by destroying and re-creating the node pool
     * 
     */
    public Output<Optional<Boolean>> allowReplace() {
        return Codegen.optional(this.allowReplace);
    }
    /**
     * [map] A key/value map of annotations
     * 
     */
    @Export(name="annotations", refs={Map.class,String.class}, tree="[0,1,1]")
    private Output</* @Nullable */ Map<String,String>> annotations;

    /**
     * @return [map] A key/value map of annotations
     * 
     */
    public Output<Optional<Map<String,String>>> annotations() {
        return Codegen.optional(this.annotations);
    }
    /**
     * [string] Wether the Node Pool should autoscale. For more details, please check the API documentation
     * 
     */
    @Export(name="autoScaling", refs={K8sNodePoolAutoScaling.class}, tree="[0]")
    private Output</* @Nullable */ K8sNodePoolAutoScaling> autoScaling;

    /**
     * @return [string] Wether the Node Pool should autoscale. For more details, please check the API documentation
     * 
     */
    public Output<Optional<K8sNodePoolAutoScaling>> autoScaling() {
        return Codegen.optional(this.autoScaling);
    }
    /**
     * [string] - The desired Compute availability zone - See the API documentation for more information. *This attribute is immutable*.
     * 
     */
    @Export(name="availabilityZone", refs={String.class}, tree="[0]")
    private Output<String> availabilityZone;

    /**
     * @return [string] - The desired Compute availability zone - See the API documentation for more information. *This attribute is immutable*.
     * 
     */
    public Output<String> availabilityZone() {
        return this.availabilityZone;
    }
    /**
     * [int] - The CPU cores count for each node of the node pool. *This attribute is immutable*.
     * 
     */
    @Export(name="coresCount", refs={Integer.class}, tree="[0]")
    private Output<Integer> coresCount;

    /**
     * @return [int] - The CPU cores count for each node of the node pool. *This attribute is immutable*.
     * 
     */
    public Output<Integer> coresCount() {
        return this.coresCount;
    }
    /**
     * [string] The desired CPU Family - See the API documentation for more information. *This attribute is immutable*.
     * 
     */
    @Export(name="cpuFamily", refs={String.class}, tree="[0]")
    private Output<String> cpuFamily;

    /**
     * @return [string] The desired CPU Family - See the API documentation for more information. *This attribute is immutable*.
     * 
     */
    public Output<String> cpuFamily() {
        return this.cpuFamily;
    }
    /**
     * [string] A Datacenter&#39;s UUID
     * 
     */
    @Export(name="datacenterId", refs={String.class}, tree="[0]")
    private Output<String> datacenterId;

    /**
     * @return [string] A Datacenter&#39;s UUID
     * 
     */
    public Output<String> datacenterId() {
        return this.datacenterId;
    }
    /**
     * [string] A k8s cluster&#39;s UUID
     * 
     */
    @Export(name="k8sClusterId", refs={String.class}, tree="[0]")
    private Output<String> k8sClusterId;

    /**
     * @return [string] A k8s cluster&#39;s UUID
     * 
     */
    public Output<String> k8sClusterId() {
        return this.k8sClusterId;
    }
    /**
     * [string] The desired Kubernetes Version. For supported values, please check the API documentation. Downgrades are not supported. The provider will ignore downgrades of patch level.
     * 
     */
    @Export(name="k8sVersion", refs={String.class}, tree="[0]")
    private Output<String> k8sVersion;

    /**
     * @return [string] The desired Kubernetes Version. For supported values, please check the API documentation. Downgrades are not supported. The provider will ignore downgrades of patch level.
     * 
     */
    public Output<String> k8sVersion() {
        return this.k8sVersion;
    }
    /**
     * [map] A key/value map of labels
     * 
     */
    @Export(name="labels", refs={Map.class,String.class}, tree="[0,1,1]")
    private Output</* @Nullable */ Map<String,String>> labels;

    /**
     * @return [map] A key/value map of labels
     * 
     */
    public Output<Optional<Map<String,String>>> labels() {
        return Codegen.optional(this.labels);
    }
    /**
     * [list] A list of numeric LAN id&#39;s you want this node pool to be part of. For more details, please check the API documentation, as well as the example above
     * 
     */
    @Export(name="lans", refs={List.class,K8sNodePoolLan.class}, tree="[0,1]")
    private Output</* @Nullable */ List<K8sNodePoolLan>> lans;

    /**
     * @return [list] A list of numeric LAN id&#39;s you want this node pool to be part of. For more details, please check the API documentation, as well as the example above
     * 
     */
    public Output<Optional<List<K8sNodePoolLan>>> lans() {
        return Codegen.optional(this.lans);
    }
    /**
     * See the **maintenance_window** section in the example above
     * 
     */
    @Export(name="maintenanceWindow", refs={K8sNodePoolMaintenanceWindow.class}, tree="[0]")
    private Output<K8sNodePoolMaintenanceWindow> maintenanceWindow;

    /**
     * @return See the **maintenance_window** section in the example above
     * 
     */
    public Output<K8sNodePoolMaintenanceWindow> maintenanceWindow() {
        return this.maintenanceWindow;
    }
    /**
     * [string] The name of the Kubernetes Cluster. *This attribute is immutable*.
     * 
     */
    @Export(name="name", refs={String.class}, tree="[0]")
    private Output<String> name;

    /**
     * @return [string] The name of the Kubernetes Cluster. *This attribute is immutable*.
     * 
     */
    public Output<String> name() {
        return this.name;
    }
    /**
     * [int] - The desired number of nodes in the node pool
     * 
     */
    @Export(name="nodeCount", refs={Integer.class}, tree="[0]")
    private Output<Integer> nodeCount;

    /**
     * @return [int] - The desired number of nodes in the node pool
     * 
     */
    public Output<Integer> nodeCount() {
        return this.nodeCount;
    }
    /**
     * [list] A list of public IPs associated with the node pool; must have at least `node_count + 1` elements
     * 
     */
    @Export(name="publicIps", refs={List.class,String.class}, tree="[0,1]")
    private Output</* @Nullable */ List<String>> publicIps;

    /**
     * @return [list] A list of public IPs associated with the node pool; must have at least `node_count + 1` elements
     * 
     */
    public Output<Optional<List<String>>> publicIps() {
        return Codegen.optional(this.publicIps);
    }
    /**
     * [int] - The desired amount of RAM, in MB. *This attribute is immutable*.
     * 
     */
    @Export(name="ramSize", refs={Integer.class}, tree="[0]")
    private Output<Integer> ramSize;

    /**
     * @return [int] - The desired amount of RAM, in MB. *This attribute is immutable*.
     * 
     */
    public Output<Integer> ramSize() {
        return this.ramSize;
    }
    /**
     * [int] - The size of the volume in GB. The size should be greater than 10GB. *This attribute is immutable*.
     * 
     */
    @Export(name="storageSize", refs={Integer.class}, tree="[0]")
    private Output<Integer> storageSize;

    /**
     * @return [int] - The size of the volume in GB. The size should be greater than 10GB. *This attribute is immutable*.
     * 
     */
    public Output<Integer> storageSize() {
        return this.storageSize;
    }
    /**
     * [string] - The desired storage type - SSD/HDD. *This attribute is immutable*.
     * 
     */
    @Export(name="storageType", refs={String.class}, tree="[0]")
    private Output<String> storageType;

    /**
     * @return [string] - The desired storage type - SSD/HDD. *This attribute is immutable*.
     * 
     */
    public Output<String> storageType() {
        return this.storageType;
    }

    /**
     *
     * @param name The _unique_ name of the resulting resource.
     */
    public K8sNodePool(java.lang.String name) {
        this(name, K8sNodePoolArgs.Empty);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     */
    public K8sNodePool(java.lang.String name, K8sNodePoolArgs args) {
        this(name, args, null);
    }
    /**
     *
     * @param name The _unique_ name of the resulting resource.
     * @param args The arguments to use to populate this resource's properties.
     * @param options A bag of options that control this resource's behavior.
     */
    public K8sNodePool(java.lang.String name, K8sNodePoolArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("ionoscloud:index/k8sNodePool:K8sNodePool", name, makeArgs(args, options), makeResourceOptions(options, Codegen.empty()), false);
    }

    private K8sNodePool(java.lang.String name, Output<java.lang.String> id, @Nullable K8sNodePoolState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        super("ionoscloud:index/k8sNodePool:K8sNodePool", name, state, makeResourceOptions(options, id), false);
    }

    private static K8sNodePoolArgs makeArgs(K8sNodePoolArgs args, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        if (options != null && options.getUrn().isPresent()) {
            return null;
        }
        return args == null ? K8sNodePoolArgs.Empty : args;
    }

    private static com.pulumi.resources.CustomResourceOptions makeResourceOptions(@Nullable com.pulumi.resources.CustomResourceOptions options, @Nullable Output<java.lang.String> id) {
        var defaultOptions = com.pulumi.resources.CustomResourceOptions.builder()
            .version(Utilities.getVersion())
            .build();
        return com.pulumi.resources.CustomResourceOptions.merge(defaultOptions, options, id);
    }

    /**
     * Get an existing Host resource's state with the given name, ID, and optional extra
     * properties used to qualify the lookup.
     *
     * @param name The _unique_ name of the resulting resource.
     * @param id The _unique_ provider ID of the resource to lookup.
     * @param state
     * @param options Optional settings to control the behavior of the CustomResource.
     */
    public static K8sNodePool get(java.lang.String name, Output<java.lang.String> id, @Nullable K8sNodePoolState state, @Nullable com.pulumi.resources.CustomResourceOptions options) {
        return new K8sNodePool(name, id, state, options);
    }
}
